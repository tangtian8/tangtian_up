# Java 并发编程基础

## 并发性与线程安全性的基本概念

### 线程安全性

- 当多个线程访问某个类时，这个类始终能表现出正确的行为，这个类是线程安全的
- 无状态对象一定是线程安全的

## 构建以及组合各种线程安全类的技术



## 使用java.util.concurrent包中的各种并发构建基础模块

## 性能优化中的注意事项

## 如何测试并发程序

## 扩展：原子变量、无阻塞算法、Java内存模型





原子性问题的源头是线程切换
同一时刻只有一个线程执行这个条件非常重要，我们称之为互斥

我们把一段需要互斥执行的代码称为临界区

解决原子性问题，是要保证中间状态对外不
可见。

竞态条件，指的是程序的执行结果依赖线程执行的顺序

管程，指的是管理共享变量以及对共享变量的操作过程，让他们支持并发。

在并发编程领域，有两大核心问题：一个是互斥，即同一时刻只允许一个线程访问共享资
源；另一个是同步，即线程之间如何通信、协作。

在 Java 领域，实现并发程序的主要手段就是多线程。

生命周期中各个节点的状态转换机制

通用的线程生命周期基本上可以用下图这个“五态模型”来描述。这五态分别是：初始状
态、可运行状态、运行状态、休眠状态和终止状态。

对于 CPU 密集型的计算场景，理论上“线程的数量 =CPU 核数”就是
最合适的

在工程上，线程的数量一般会设置为“CPU 核数 +1”，这样的话，当线
程因为偶尔的内存页失效或其他原因导致阻塞时，这个额外的线程可以顶上，从而保证
CPU 的利用率。

最佳线程数 =1 +（I/O 耗时 / CPU 耗时）

最佳线程数 =CPU 核数 * [ 1 +（I/O 耗时 / CPU 耗时）]

多研究原理性的东西、通用的东西，有这些东西之后再学具体的技术就快多了。
